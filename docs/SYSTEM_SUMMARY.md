# ğŸ“‹ ×¡×™×›×•× ××¢×¨×›×ª AviMP4

## ğŸ¯ ×ª×™××•×¨ ×”××¢×¨×›×ª

**AviMP4** ×”×™× ××¢×¨×›×ª ×œ×”×•×¨×“×ª ×•×™×“××•/××•×“×™×• ×-YouTube, Facebook, TikTok ×•×¢×•×“ 1000+ ××ª×¨×™× ×‘×××¦×¢×•×ª JDownloader.

### ××¨×›×™×˜×§×˜×•×¨×”
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ARCHITECTURE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  React   â”‚â”€â”€â”€â–¶â”‚   Express    â”‚â”€â”€â”€â–¶â”‚   MyJDownloader     â”‚   â”‚
â”‚   â”‚ Frontend â”‚â—€â”€â”€â”€â”‚   Backend    â”‚â—€â”€â”€â”€â”‚   Cloud API         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚                â”‚                       â”‚               â”‚
â”‚        â”‚                â”‚                       â”‚               â”‚
â”‚        â”‚                â–¼                       â–¼               â”‚
â”‚        â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚        â”‚          â”‚ Supabase â”‚          â”‚ JDownloader â”‚         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Database â”‚          â”‚   Client    â”‚         â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ××‘× ×” ×§×‘×¦×™×

| ×§×•×‘×¥/×ª×™×§×™×™×” | ×ª×¤×§×™×“ |
|-------------|--------|
| `src/index.ts` | ×©×¨×ª Express ×¨××©×™ |
| `src/lib/jdownloader/` | ××•×“×•×œ JDownloader API |
| `src/services/download-service.ts` | ×œ×•×’×™×§×ª ×”×•×¨×“×•×ª |
| `src/routes/downloads.ts` | API endpoints |
| `frontend/components/VideoDownloader.tsx` | ×§×•××¤×•× × ×˜×ª React |
| `docs/` | ×ª×™×¢×•×“ (4 ×§×‘×¦×™×) |

---

## ğŸ” ××‘×˜×—×” ×•×”×¦×¤× ×”

### ××œ×’×•×¨×™×ª××™× ×‘×©×™××•×©:

| ××œ×’×•×¨×™×ª× | ×©×™××•×© |
|----------|-------|
| SHA256 | ×™×¦×™×¨×ª secrets ×•-tokens |
| AES-128-CBC | ×”×¦×¤× ×ª ×ª×§×©×•×¨×ª |
| HMAC-SHA256 | ×—×ª×™××•×ª ×“×™×’×™×˜×œ×™×•×ª |

### ×–×¨×™××ª ××™××•×ª:
```
1. ×™×¦×™×¨×ª loginSecret = SHA256(email + password + "server")
2. ×”×ª×—×‘×¨×•×ª ×¢× ×—×ª×™××ª HMAC ×¢×œ query
3. ×§×‘×œ×ª sessionToken ××”×©×¨×ª
4. ×™×¦×™×¨×ª encryptionTokens ×œ×©×¨×ª ×•×œ××›×©×™×¨
5. ×›×œ ×ª×§×©×•×¨×ª ××•×¦×¤× ×ª ×‘-AES ×•×—×ª×•××” ×‘-HMAC
```

---

## ğŸ“¡ API Endpoints

### Download API

| Method | Endpoint | ×ª×™××•×¨ |
|--------|----------|--------|
| POST | `/api/downloads` | ×©×œ×™×—×ª ×”×•×¨×“×” ×—×“×©×” |
| GET | `/api/downloads/:id` | ×¡×˜×˜×•×¡ ×”×•×¨×“×” |
| GET | `/api/downloads/user/:userId` | ×”×•×¨×“×•×ª ×©×œ ××©×ª××© |
| POST | `/api/downloads/:id/cancel` | ×‘×™×˜×•×œ ×”×•×¨×“×” |
| POST | `/api/downloads/:id/retry` | × ×™×¡×™×•×Ÿ ×—×•×–×¨ |

### ×“×•×’××ª ×‘×§×©×”:
```json
POST /api/downloads
{
  "url": "https://youtube.com/watch?v=xxx",
  "mediaType": "video",
  "preferredQuality": "1080p"
}
```

### ×“×•×’××ª ×ª×’×•×‘×”:
```json
{
  "success": true,
  "job": {
    "id": "uuid",
    "status": "pending",
    "sourceUrl": "...",
    "sourcePlatform": "youtube"
  }
}
```

---

## âš™ï¸ ×”×’×“×¨×•×ª × ×“×¨×©×•×ª

### ××©×ª× ×™ ×¡×‘×™×‘×” (.env):
```env
# MyJDownloader (×—×•×‘×”)
MYJD_EMAIL=your@email.com
MYJD_PASSWORD=your_password
MYJD_DEVICE_NAME=device_name

# Supabase
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=xxx

# Server
PORT=3001
CORS_ORIGIN=https://your-domain.com
DOWNLOAD_PATH=/path/to/downloads
```

---

## ğŸ“Š ×¡×˜×˜×•×¡×™ ×”×•×¨×“×”

| ×¡×˜×˜×•×¡ | ×ª×™××•×¨ |
|-------|--------|
| `pending` | ×××ª×™×Ÿ ×‘×ª×•×¨ |
| `crawling` | ×× ×ª×— ×§×™×©×•×¨ |
| `ready` | ××•×›×Ÿ ×œ×”×•×¨×“×” |
| `downloading` | ××•×¨×™×“ |
| `completed` | ×”×•×©×œ× ×‘×”×¦×œ×—×” |
| `failed` | × ×›×©×œ |
| `cancelled` | ×‘×•×˜×œ |

---

## ğŸ–¥ï¸ ×¤×œ×˜×¤×•×¨××•×ª × ×ª××›×•×ª

- YouTube (videos, playlists, channels)
- Facebook (videos, reels)
- Vimeo
- TikTok
- Instagram (posts, reels, stories)
- Twitter/X
- Twitch (VODs, clips)
- Dailymotion
- + ×¢×•×“ 1000 ××ª×¨×™×

---

## ğŸš€ ×”×ª×§× ×” ××”×™×¨×”

### ×¤×™×ª×•×— ××§×•××™:
```bash
# 1. ×©×›×¤×•×œ
git clone https://github.com/ZyrticX/MP4.git
cd MP4

# 2. ×”×ª×§× ×”
npm install

# 3. ×”×’×“×¨×•×ª
cp env.template .env
# ×¢×¨×•×š ××ª .env ×¢× ×”×¤×¨×˜×™× ×©×œ×š

# 4. ×”×¨×¦×”
npm run dev
```

### ×¤×¨×•×“×§×©×Ÿ (Hetzner):
```bash
# ×¨××” docs/HETZNER_SETUP.md ×œ××“×¨×™×š ××œ×
```

---

## ğŸ› ×“×™×‘×•×’ ×‘×¢×™×•×ª ×—×ª×™××•×ª

### ×‘×“×•×§ ×‘×œ×•×’×™×:
```
createSignature - query: /my/listdevices?rid=xxx&sessiontoken=yyy
createSignature - token (hex): abc123...
createSignature - signature: def456...
```

### ×‘×¢×™×•×ª × ×¤×•×¦×•×ª:

1. **AUTH_FAILED**: ×‘×“×•×§ email ×‘-lowercase
2. **TOKEN_INVALID**: ×•×•×“× sessiontoken ×‘-query
3. **Decryption error**: ×‘×“×•×§ ×¡×“×¨ IV/Key
4. **Device error**: ×‘×“×•×§ signature ×¢×œ devicePath

---

## ğŸ“š ×§×‘×¦×™ ×ª×™×¢×•×“

| ×§×•×‘×¥ | ×ª×•×›×Ÿ |
|------|------|
| `SETUP_GUIDE_HE.md` | ××“×¨×™×š ×”×ª×§× ×” ××¤×•×¨×˜ (×¢×‘×¨×™×ª) |
| `HETZNER_SETUP.md` | ×”×ª×§× ×” ×¢×œ ×©×¨×ª Linux |
| `JDOWNLOADER_API_SUMMARY.md` | ×¡×™×›×•× MyJDownloader API |
| `CODEBASE_STRUCTURE.md` | ××‘× ×” ×”×§×•×“ |
| `CRYPTO_SIGNATURES.md` | ×”×¡×‘×¨ ×”×¦×¤× ×•×ª ×•×—×ª×™××•×ª |
| `SYSTEM_SUMMARY.md` | ×¡×™×›×•× ×›×œ×œ×™ (×§×•×‘×¥ ×–×”) |

---

## ğŸ”— ×§×™×©×•×¨×™× ×—×©×•×‘×™×

- **GitHub**: https://github.com/ZyrticX/MP4
- **MyJDownloader**: https://my.jdownloader.org
- **JDownloader**: https://jdownloader.org/jdownloader2
- **API Docs**: ×¨××” `jdownloader.md` ×‘×¤×¨×•×™×§×˜

---

## ğŸ“ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### JDownloader ×œ× ××ª×—×‘×¨:
1. ×•×•×“× JDownloader ×¤×•×¢×œ
2. ×‘×“×•×§ ×—×™×‘×•×¨ ×‘-Settings â†’ My.JDownloader
3. ×•×•×“× credentials × ×›×•× ×™× ×‘-.env

### ×©×’×™××•×ª ×—×ª×™××”:
1. ×¨××” `CRYPTO_SIGNATURES.md`
2. ×”×•×¡×£ ×œ×•×’×™× ×œ-`crypto.ts`
3. ×‘×“×•×§ ××•×¨×›×™ buffers (×¦×¨×™×š ×œ×”×™×•×ª 32)

### ×”×•×¨×“×•×ª ×ª×§×•×¢×•×ª:
1. ×‘×“×•×§ JDownloader UI
2. ×™×ª×›×Ÿ captcha
3. ×™×ª×›×Ÿ ×§×™×©×•×¨ ×œ× × ×ª××š

